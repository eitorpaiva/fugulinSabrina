<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <title>Graduação da Complexidade Assistencial</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .selectable {
            cursor: pointer;
        }
    </style>
</head>

<body class="bg-light p-4">

    <div class="container">
        <div class="card shadow">
            <div class="card-header bg-secondary text-white text-center">
                <h4 class="mb-0">Graduação da Complexidade Assistencial</h4>
            </div>

            <div class="container">
                <div class="row mt-4">
                    <div class="col-md-6">
                        <div class="alert alert-info">
                            <strong>Pontuação Total:</strong>
                            <span id="pontuacaoTotal">0</span>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="alert alert-warning">
                            <strong>Classificação:</strong>
                            <span id="classificacao">—</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card-body table-responsive">
                <table class="table table-bordered align-middle text-center">
                    <thead class="table-secondary">
                        <tr>
                            <th rowspan="2" class="align-middle">Área de cuidado</th>
                            <th colspan="4">Graduação da complexidade assistencial</th>
                        </tr>
                        <tr>
                            <th>4</th>
                            <th>3</th>
                            <th>2</th>
                            <th>1</th>
                        </tr>
                    </thead>

                    <tbody>

                        <!-- Estado Mental -->
                        <tr>
                            <th>Estado mental</th>
                            <td class="selectable">
                                Inconsciente <br>
                                <input type="checkbox" class="form-check-input score" value="4">
                            </td>
                            <td class="selectable">
                                Períodos de inconsciência <br>
                                <input type="checkbox" class="form-check-input score" value="3">
                            </td>
                            <td class="selectable">
                                Períodos de desorientação no tempo e espaço <br>
                                <input type="checkbox" class="form-check-input score" value="2">
                            </td>
                            <td class="selectable">
                                Orientação no tempo e espaço <br>
                                <input type="checkbox" class="form-check-input score" value="1">
                            </td>
                        </tr>

                        <!-- Oxigenação -->
                        <tr>
                            <th>Oxigenação</th>
                            <td class="selectable">Ventilação Mecânica <br><input type="checkbox"
                                    class="form-check-input score" value="4">
                            </td>
                            <td class="selectable">Uso contínuo de máscara ou cateter de oxigênio <br><input
                                    type="checkbox" class="form-check-input score" value="3"></td>
                            <td class="selectable">Uso intermitente de máscara ou cateter de oxigênio <br><input
                                    type="checkbox" class="form-check-input score" value="2"></td>
                            <td class="selectable">Não depende de oxigênio <br><input type="checkbox"
                                    class="form-check-input score" value="1"></td>
                        </tr>

                        <!-- Sinais Vitais -->
                        <tr>
                            <th>Sinais vitais</th>
                            <td class="selectable">Controle ≤ 2h <br><input type="checkbox"
                                    class="form-check-input score" value="4"></td>
                            <td class="selectable">Controle a cada 4h <br><input type="checkbox"
                                    class="form-check-input score" value="3">
                            </td>
                            <td class="selectable">Controle a cada 6h <br><input type="checkbox"
                                    class="form-check-input score" value="2">
                            </td>
                            <td class="selectable">Controle de rotina (8h) <br><input type="checkbox"
                                    class="form-check-input score" value="1"></td>
                        </tr>

                        <!-- Motilidade -->
                        <tr>
                            <th>Motilidade</th>
                            <td class="selectable">Incapaz de movimentar segmentos corporais <br><input type="checkbox"
                                    class="form-check-input score" value="4"></td>
                            <td class="selectable">Dificuldade para movimentar segmentos <br><input type="checkbox"
                                    class="form-check-input score" value="3"></td>
                            <td class="selectable">Limitação de movimentos <br><input type="checkbox"
                                    class="form-check-input score" value="2"></td>
                            <td class="selectable">Movimenta todos os segmentos <br><input type="checkbox"
                                    class="form-check-input score" value="1"></td>
                        </tr>

                        <!-- Deambulação -->
                        <tr>
                            <th>Deambulação</th>
                            <td class="selectable">Restrito ao leito <br><input type="checkbox"
                                    class="form-check-input score" value="4">
                            </td>
                            <td class="selectable">Locomoção por cadeira de rodas <br><input type="checkbox"
                                    class="form-check-input score" value="3"></td>
                            <td class="selectable">Necessita de auxílio <br><input type="checkbox"
                                    class="form-check-input score" value="2"></td>
                            <td class="selectable">Ambulante <br><input type="checkbox" class="form-check-input score"
                                    value="1"></td>
                        </tr>

                        <!-- Alimentação -->
                        <tr>
                            <th>Alimentação</th>
                            <td class="selectable">Cateter central <br><input type="checkbox"
                                    class="form-check-input score" value="4">
                            </td>
                            <td class="selectable">Sonda nasogástrica <br><input type="checkbox"
                                    class="form-check-input score" value="3">
                            </td>
                            <td class="selectable">Por boca com auxílio <br><input type="checkbox"
                                    class="form-check-input score" value="2"></td>
                            <td class="selectable">Auto-suficiente <br><input type="checkbox"
                                    class="form-check-input score" value="1">
                            </td>
                        </tr>

                        <!-- Cuidado Corporal -->
                        <tr>
                            <th>Cuidado corporal</th>
                            <td class="selectable">Banho no leito pela enfermagem <br><input type="checkbox"
                                    class="form-check-input score" value="4"></td>
                            <td class="selectable">Banho de chuveiro pela enfermagem <br><input type="checkbox"
                                    class="form-check-input score" value="3"></td>
                            <td class="selectable">Auxílio no banho <br><input type="checkbox"
                                    class="form-check-input score" value="2">
                            </td>
                            <td class="selectable">Auto-suficiente <br><input type="checkbox"
                                    class="form-check-input score" value="1">
                            </td>
                        </tr>

                        <!-- Eliminação -->
                        <tr>
                            <th>Eliminação</th>
                            <td class="selectable">Sonda vesical e evacuação no leito <br><input type="checkbox"
                                    class="form-check-input score" value="4"></td>
                            <td class="selectable">Uso de comadre <br><input type="checkbox"
                                    class="form-check-input score" value="3"></td>
                            <td class="selectable">Uso de vaso com auxílio <br><input type="checkbox"
                                    class="form-check-input score" value="2"></td>
                            <td class="selectable">Auto-suficiente <br><input type="checkbox"
                                    class="form-check-input score" value="1">
                            </td>
                        </tr>

                        <!-- Terapêutica -->
                        <tr>
                            <th>Terapêutica</th>
                            <td class="selectable">Drogas vasoativas <br><input type="checkbox"
                                    class="form-check-input score" value="4">
                            </td>
                            <td class="selectable">EV contínua <br><input type="checkbox" class="form-check-input score"
                                    value="3"></td>
                            <td class="selectable">EV intermitente <br><input type="checkbox"
                                    class="form-check-input score" value="2">
                            </td>
                            <td class="selectable">Intramuscular ou via oral <br><input type="checkbox"
                                    class="form-check-input score" value="1"></td>
                        </tr>

                        <!-- Total -->
                        <tr class="table-dark text-white">
                            <th>Total</th>
                            <td id="total4">0</td>
                            <td id="total3">0</td>
                            <td id="total2">0</td>
                            <td id="total1">0</td>
                        </tr>

                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        const checkboxes = document.querySelectorAll('.score');
        const cells = document.querySelectorAll('.selectable'); // ← estava faltando isso

        function atualizarTotais() {
            let totals = { 1: 0, 2: 0, 3: 0, 4: 0 };
            let soma = 0;

            checkboxes.forEach(cb => {
                if (cb.checked) {
                    totals[cb.value]++;
                    soma += parseInt(cb.value);
                }
            });

            // Totais por coluna (pontuação real)
            document.getElementById('total1').textContent = totals[1] * 1;
            document.getElementById('total2').textContent = totals[2] * 2;
            document.getElementById('total3').textContent = totals[3] * 3;
            document.getElementById('total4').textContent = totals[4] * 4;

            // Pontuação total
            document.getElementById('pontuacaoTotal').textContent = soma;

            // Classificação automática
            let classificacao = "";

            if (soma < 9) {
                classificacao = "—";
            } else if (soma <= 14) {
                classificacao = "Cuidado Mínimo";
            } else if (soma <= 20) {
                classificacao = "Cuidado Intermediário";
            } else if (soma <= 26) {
                classificacao = "Alta Dependência";
            } else {
                classificacao = "Intensivo";
            }

            document.getElementById('classificacao').textContent = classificacao;
        }

        // Atualiza ao clicar diretamente na checkbox
        checkboxes.forEach(cb => {
            cb.addEventListener('change', atualizarTotais);
        });

        // Torna a célula inteira clicável
        cells.forEach(cell => {
            cell.addEventListener('click', function (e) {
                if (e.target.tagName !== "INPUT") {
                    const checkbox = cell.querySelector('input[type="checkbox"]');
                    checkbox.checked = !checkbox.checked;
                    atualizarTotais();
                }
            });
        });
    </script>

</body>

</html>